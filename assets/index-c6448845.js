var w=(p,g,r)=>new Promise((l,o)=>{var f=t=>{try{i(r.next(t))}catch(e){o(e)}},c=t=>{try{i(r.throw(t))}catch(e){o(e)}},i=t=>t.done?l(t.value):Promise.resolve(t.value).then(f,c);i((r=r.apply(p,g)).next())});import{_ as $}from"./AppPage-0e75b682.js";import{_ as R}from"./logo-c890039e.js";import{at as N,r as v,au as h,av as S,P as V,Q as y,ag as L,T as a,L as T,M as B,O as K,X as n,$ as u,V as x,W as P,aw as q,ax as A,ay as C,as as D}from"./index-0748ec09.js";import{_ as M}from"./Checkbox-c20e72fc.js";import{_ as U}from"./Input-52fd70f1.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-merged-state-bac9929e.js";import"./Eye-51824937.js";const z="/vue-naive-admin/assets/login_banner-6e96327c.webp",O="/vue-naive-admin/assets/login_bg-ed2739b3.webp",Q={login:p=>N.post("/auth/login",p,{noNeedToken:!0})},W={style:{transform:"translateY(25px)"},class:"m-auto p-15 f-c-c min-w-345 max-w-700 rounded-10 card-shadow bg-white bg-opacity-60","dark:bg-dark":""},X=n("div",{"w-380":"",hidden:"","md:block":"","px-20":"","py-35":""},[n("img",{src:z,"w-full":"",alt:"login_banner"})],-1),Y={"w-320":"","flex-col":"","px-20":"","py-35":""},j={"f-c-c":"","text-24":"","font-normal":"",color:"#6a6a6a"},E={"mt-30":""},F={"mt-30":""},G={"mt-20":""},H={"mt-20":""},ie={__name:"index",setup(p){const g="Vue Naive Admin",r=T(),{query:l}=B(),o=v({name:"",password:""});f();function f(){const e=h.get("loginInfo");e&&(o.value.name=e.name||"",o.value.password=e.password||"")}const c=S("isRemember",!1),i=v(!1);function t(){return w(this,null,function*(){const{name:e,password:s}=o.value;if(!e||!s){$message.warning("请输入用户名和密码");return}try{i.value=!0,$message.loading("正在验证...");const d=yield Q.login({name:e,password:s.toString()});if($message.success("登录成功"),A(d.data.token),c.value?h.set("loginInfo",{name:e,password:s}):h.remove("loginInfo"),yield C(),l.redirect){const _=l.redirect;Reflect.deleteProperty(l,"redirect"),r.push({path:_,query:l})}else r.push("/")}catch(d){console.error(d),$message.removeMessage()}i.value=!1})}return(e,s)=>{const d=R,_=U,b=M,k=D,I=$;return K(),V(I,{"show-footer":!0,"bg-cover":"",style:L({backgroundImage:`url(${a(O)})`})},{default:y(()=>[n("div",W,[X,n("div",Y,[n("h5",j,[u(d,{"mr-10":"","text-50":"","color-primary":""}),x(P(a(g)),1)]),n("div",E,[u(_,{value:a(o).name,"onUpdate:value":s[0]||(s[0]=m=>a(o).name=m),autofocus:"",class:"text-16 items-center h-50 pl-10",placeholder:"admin",maxlength:20},null,8,["value"])]),n("div",F,[u(_,{value:a(o).password,"onUpdate:value":s[1]||(s[1]=m=>a(o).password=m),class:"text-16 items-center h-50 pl-10",type:"password","show-password-on":"mousedown",placeholder:"123456",maxlength:20,onKeydown:q(t,["enter"])},null,8,["value","onKeydown"])]),n("div",G,[u(b,{checked:a(c),label:"记住我","on-update:checked":m=>c.value=m},null,8,["checked","on-update:checked"])]),n("div",H,[u(k,{"w-full":"","h-50":"","rounded-5":"","text-16":"",type:"primary",loading:a(i),onClick:t},{default:y(()=>[x(" 登录 ")]),_:1},8,["loading"])])])])]),_:1},8,["style"])}}};export{ie as default};
